# å¤§ä¹é€å·ç æ¨èå°ç¨‹åº - å¼€å‘æŒ‡å—

## ğŸ“± é¡¹ç›®ä»‹ç»

åŸºäºTDesignç»„ä»¶åº“å¼€å‘çš„å¾®ä¿¡å°ç¨‹åºï¼Œæä¾›å¤§ä¹é€å·ç æ™ºèƒ½æ¨èåŠŸèƒ½ã€‚

## âœ¨ ä¸»è¦åŠŸèƒ½

### é¦–é¡µåŠŸèƒ½
1. **æ•°æ®è·å–** - ç‚¹å‡»æŒ‰é’®è‡ªåŠ¨çˆ¬å–æœ€æ–°å¼€å¥–æ•°æ®
2. **æ™ºèƒ½æ¨è** - æ”¯æŒ4ç§ç­–ç•¥ï¼ˆå…¨éƒ¨æ•°æ®/æœ€è¿‘3å¹´/ä»Šå¹´/æœ¬æœˆï¼‰
   - çƒ­é—¨å·ç ï¼šåŸºäºå†å²é«˜é¢‘å·ç 
   - å†·é—¨å·ç ï¼šåŸºäºå†å²ä½é¢‘å·ç 
3. **éšæœºé€‰å·** - éšæœºç”Ÿæˆä¸€ç»„å·ç 
4. **å…è´£å£°æ˜** - é¡µé¢åº•éƒ¨å±•ç¤º

### å†å²æ•°æ®é¡µé¢
1. æŒ‰æ—¶é—´å€’åºå±•ç¤º
2. åˆå§‹æ˜¾ç¤ºæœ€è¿‘10æœŸ
3. ç‚¹å‡»"åŠ è½½æ›´å¤š"æ¯æ¬¡è¿½åŠ 10æœŸ
4. æ‰€æœ‰æ•°æ®ä¿å­˜åœ¨ç»Ÿä¸€æ–‡ä»¶ `full_lottery_data.json`

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
cd miniprogram
npm install
```

### 2. æ„å»ºnpm

åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­ï¼š
1. ç‚¹å‡»èœå•æ ï¼šå·¥å…· -> æ„å»ºnpm
2. ç­‰å¾…æ„å»ºå®Œæˆ

### 3. é…ç½®APIåœ°å€

ä¿®æ”¹ `miniprogram/app.js` ä¸­çš„ `apiBase`ï¼š

```javascript
globalData: {
  // æœ¬åœ°å¼€å‘
  apiBase: 'http://localhost:5000/api'
  
  // æˆ–ç”Ÿäº§ç¯å¢ƒ
  // apiBase: 'https://your-domain.com/api'
}
```

**æ³¨æ„**: å¾®ä¿¡å°ç¨‹åºè¦æ±‚ç”Ÿäº§ç¯å¢ƒå¿…é¡»ä½¿ç”¨HTTPSåè®®ã€‚

### 4. å¯åŠ¨APIæœåŠ¡å™¨

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•
cd api-server
pip install -r requirements.txt
python app.py
```

APIæœåŠ¡å°†åœ¨ `http://localhost:5000` å¯åŠ¨ã€‚

### 5. é…ç½®å°ç¨‹åº

1. åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­æ‰“å¼€ `miniprogram` ç›®å½•
2. é…ç½®AppIDï¼ˆåœ¨ `project.config.json` ä¸­ï¼‰
3. å¼€å¯"ä¸æ ¡éªŒåˆæ³•åŸŸå"ï¼ˆä»…å¼€å‘ç¯å¢ƒï¼‰ï¼š
   - å³ä¸Šè§’è¯¦æƒ… -> æœ¬åœ°è®¾ç½® -> å‹¾é€‰"ä¸æ ¡éªŒåˆæ³•åŸŸå..."

### 6. ç¼–è¯‘è¿è¡Œ

ç‚¹å‡»"ç¼–è¯‘"æŒ‰é’®å³å¯é¢„è§ˆå°ç¨‹åºã€‚

## ğŸ“‚ é¡¹ç›®ç»“æ„

```
miniprogram/
â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ index/           # é¦–é¡µ
â”‚   â”‚   â”œâ”€â”€ index.wxml   # é¡µé¢ç»“æ„
â”‚   â”‚   â”œâ”€â”€ index.js     # é¡µé¢é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ index.wxss   # é¡µé¢æ ·å¼
â”‚   â”‚   â””â”€â”€ index.json   # é¡µé¢é…ç½®
â”‚   â””â”€â”€ history/         # å†å²æ•°æ®é¡µ
â”‚       â”œâ”€â”€ history.wxml
â”‚       â”œâ”€â”€ history.js
â”‚       â”œâ”€â”€ history.wxss
â”‚       â””â”€â”€ history.json
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ api.js           # APIå·¥å…·ç±»
â”‚   â””â”€â”€ util.js          # é€šç”¨å·¥å…·
â”œâ”€â”€ app.js               # å°ç¨‹åºå…¥å£
â”œâ”€â”€ app.json             # å…¨å±€é…ç½®
â”œâ”€â”€ app.wxss             # å…¨å±€æ ·å¼
â”œâ”€â”€ package.json         # npmé…ç½®
â””â”€â”€ project.config.json  # é¡¹ç›®é…ç½®
```

## ğŸ¨ ä½¿ç”¨çš„TDesignç»„ä»¶

- `t-button` - æŒ‰é’®
- `t-cell` / `t-cell-group` - å•å…ƒæ ¼
- `t-tag` - æ ‡ç­¾
- `t-divider` - åˆ†å‰²çº¿
- `t-radio` / `t-radio-group` - å•é€‰æ¡†
- `t-toast` - è½»æç¤º

## ğŸ”§ APIæ¥å£è¯´æ˜

### 1. è·å–æ•°æ®çŠ¶æ€
```
GET /api/data_status
è¿”å›: { success, total_records, latest_period }
```

### 2. æ›´æ–°æ•°æ®
```
POST /api/update_data
è¿”å›: { success, message, new_records, total_records }
```

### 3. è·å–é¢„æµ‹
```
GET /api/get_predictions?strategy=all
å‚æ•°: strategy (all/3years/thisYear/thisMonth)
è¿”å›: { success, data: { hot_numbers, cold_numbers } }
```

### 4. è·å–å†å²æ•°æ®
```
GET /api/get_history?offset=0&limit=10
å‚æ•°: offset, limit
è¿”å›: { success, data, total }
```

## ğŸ“ å¼€å‘æ³¨æ„äº‹é¡¹

### 1. æ•°æ®åŒæ­¥
- æ‰€æœ‰æ•°æ®ç»Ÿä¸€ä¿å­˜åœ¨ `full_lottery_data.json`
- å°ç¨‹åºå’ŒAPIæœåŠ¡å™¨å…±äº«åŒä¸€æ•°æ®æ–‡ä»¶
- ç¡®ä¿æ•°æ®ä¸€è‡´æ€§

### 2. å·ç æ˜¾ç¤ºæ ¼å¼
- æ‰€æœ‰å·ç ç»Ÿä¸€æ˜¾ç¤ºä¸ºä¸¤ä½æ•°ï¼ˆå¦‚ï¼š01, 02, 35ï¼‰
- å‰åŒºå’ŒååŒºä½¿ç”¨ä¸åŒé¢œè‰²åŒºåˆ†
- 7ä¸ªå·ç åœ¨åŒä¸€è¡Œæ˜¾ç¤ºï¼Œä¸­é—´ç”¨ + åˆ†éš”

### 3. å¾®ä¿¡å°ç¨‹åºé™åˆ¶
- ç”Ÿäº§ç¯å¢ƒå¿…é¡»ä½¿ç”¨HTTPS
- éœ€è¦åœ¨å¾®ä¿¡å…¬ä¼—å¹³å°é…ç½®æœåŠ¡å™¨åŸŸå
- requeståˆæ³•åŸŸåã€uploadFileåˆæ³•åŸŸåç­‰

### 4. TDesignç»„ä»¶ä½¿ç”¨
- éœ€å…ˆåœ¨ `app.json` æˆ–é¡µé¢jsonä¸­å£°æ˜ç»„ä»¶
- ä½¿ç”¨ `t-` å‰ç¼€è°ƒç”¨ç»„ä»¶
- å‚è€ƒ [TDesignå°ç¨‹åºæ–‡æ¡£](https://tdesign.tencent.com/miniprogram/overview)

## ğŸš¢ éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ

### 1. éƒ¨ç½²APIæœåŠ¡å™¨

```bash
# ä½¿ç”¨gunicornéƒ¨ç½²
pip install gunicorn
gunicorn -w 4 -b 0.0.0.0:5000 app:app
```

### 2. é…ç½®HTTPS

ä½¿ç”¨Nginxåå‘ä»£ç†å¹¶é…ç½®SSLè¯ä¹¦ï¼š

```nginx
server {
    listen 443 ssl;
    server_name your-domain.com;
    
    ssl_certificate /path/to/cert.pem;
    ssl_certificate_key /path/to/key.pem;
    
    location /api/ {
        proxy_pass http://localhost:5000/api/;
    }
}
```

### 3. é…ç½®å°ç¨‹åº

1. ä¿®æ”¹ `app.js` ä¸­çš„ `apiBase` ä¸ºç”Ÿäº§ç¯å¢ƒåœ°å€
2. åœ¨å¾®ä¿¡å…¬ä¼—å¹³å°é…ç½®æœåŠ¡å™¨åŸŸå
3. ä¸Šä¼ ä»£ç å¹¶æäº¤å®¡æ ¸

### 4. å®šæ—¶æ›´æ–°æ•°æ®

ä½¿ç”¨cronå®šæ—¶ä»»åŠ¡è‡ªåŠ¨æ›´æ–°æ•°æ®ï¼š

```bash
# æ¯å¤©å‡Œæ™¨2ç‚¹æ›´æ–°
0 2 * * * cd /path/to/project && python data_crawler.py
```

## âš ï¸ å…è´£å£°æ˜

æœ¬å°ç¨‹åºä»…ä¾›å­¦ä¹ å’Œå¨±ä¹ä½¿ç”¨ï¼Œæä¾›çš„å·ç æ¨èåŸºäºå†å²æ•°æ®ç»Ÿè®¡åˆ†æï¼Œä¸ä¿è¯ä»»ä½•ä¸­å¥–æ¦‚ç‡ã€‚è¯·ç†æ€§è´­å½©ï¼Œé‡åŠ›è€Œè¡Œã€‚

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·é€šè¿‡GitHub Issuesæäº¤ã€‚

## ğŸ“„ å¼€æºåè®®

MIT License
