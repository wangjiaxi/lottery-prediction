# 大乐透号码推荐小程序 🎰

一个基于历史开奖数据的大乐透号码预测微信小程序，使用TDesign组件库和原生微信小程序框架开发。

## ⚠️ 免责声明

本小程序仅供娱乐和学习使用，提供的号码推荐基于历史数据的统计分析，不保证任何中奖概率。彩票具有随机性，请理性购彩，量力而行。

## ✨ 功能特点

### 🏠 首页功能
- 📊 **数据状态显示** - 实时显示数据总量和最新期次
- 🔄 **最新数据获取** - 点击按钮自动爬取最新开奖数据
- 🎯 **智能号码推荐** - 提供四种策略选项：
  - 全部数据
  - 最近3年
  - 今年
  - 本月
- 🔥 **热门号码** - 基于历史高频号码推荐
- ❄️ **冷门号码** - 基于历史低频号码推荐
- 🎲 **随机选号** - 随机生成一组号码
- 📱 **优雅展示** - 所有7个号码在同一行显示
- ⚖️ **免责声明** - 页面底部展示使用提示

### 📜 历史数据页面
- 📅 **时间倒序** - 最新期次排在前面
- 📊 **分页加载** - 初始显示最近10期
- ➕ **加载更多** - 每次点击追加10期数据
- 💾 **数据同步** - 所有数据保存在统一文件

## 🚀 快速开始

### 开发环境准备

1. 下载并安装[微信开发者工具](https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html)
2. 注册微信小程序账号并获取AppID
3. 安装Python 3.11+和Node.js

### 本地开发

#### 1. 安装小程序依赖

```bash
cd miniprogram
npm install
```

在微信开发者工具中点击：**工具 -> 构建npm**

#### 2. 启动API服务器

```bash
cd api-server
pip install -r requirements.txt
python app.py
```

API服务将在 `http://localhost:5000` 启动。

#### 3. 配置小程序

1. 使用微信开发者工具打开 `miniprogram` 目录
2. 修改 `app.js` 中的 `apiBase` 为你的API地址
3. 在项目详情中配置AppID
4. 开启"不校验合法域名"（仅开发环境）
5. 点击"编译"预览

#### 4. 获取初始数据

```bash
# 在项目根目录执行
python data_crawler.py
```

这将获取最新的开奖数据并保存到 `full_lottery_data.json`

## 📂 项目结构

```
彩票推荐_小程序/
├── miniprogram/              # 微信小程序代码
│   ├── pages/
│   │   ├── index/           # 首页（号码推荐）
│   │   └── history/         # 历史数据页
│   ├── utils/
│   │   ├── api.js          # API工具类
│   │   └── util.js         # 通用工具
│   ├── app.js              # 小程序入口
│   ├── app.json            # 全局配置
│   ├── app.wxss            # 全局样式
│   └── package.json        # npm依赖
├── api-server/              # API服务器
│   ├── app.py             # Flask应用
│   └── requirements.txt    # Python依赖
├── data_crawler.py          # 数据爬虫（增量更新）
├── full_data_crawler.py     # 完整数据爬虫
├── full_lottery_data.json   # 数据存储文件
└── project.config.json      # 小程序项目配置
```

## 🔧 技术栈

- **前端**: 微信小程序原生框架
- **UI组件**: TDesign小程序组件库
- **后端**: Python 3.11 + Flask
- **数据处理**: pandas, BeautifulSoup4
- **数据存储**: JSON文件

## 📊 核心功能说明

### 智能推荐算法

#### 热门号码
- 统计选定时间范围内号码出现频率
- 选择出现次数最多的号码推荐
- 前区推荐5个，后区推荐2个

#### 冷门号码
- 统计选定时间范围内号码出现频率
- 选择出现次数最少的号码推荐
- 考虑所有可能号码（前区1-35，后区1-12）

#### 策略选择
- **全部数据**: 基于所有历史数据分析
- **最近3年**: 仅分析最近3年的数据
- **今年**: 仅分析本年度的数据
- **本月**: 仅分析本月的数据

### 数据获取

系统通过爬虫从官方API自动获取开奖数据：
- 支持增量更新
- 自动去重
- 按期次倒序排列

## 🎨 界面设计

### TDesign组件应用
- 使用TDesign统一设计规范
- 采用品牌蓝色主题（#0052D9）
- 卡片式布局，清晰直观
- 响应式交互反馈

### 号码球设计
- 前区：紫色渐变
- 后区：粉红渐变
- 圆形设计，美观易识别
- 统一两位数显示格式

## 📝 使用说明

### 首次使用

1. **获取数据**
   - 打开小程序首页
   - 点击"获取最新数据"按钮
   - 等待数据爬取完成

2. **查看推荐**
   - 选择分析策略（默认"全部数据"）
   - 点击"生成推荐号码"
   - 查看热门和冷门号码推荐

3. **随机选号**
   - 点击"随机生成"按钮
   - 系统自动生成一组随机号码

4. **查看历史**
   - 切换到"历史数据"标签
   - 浏览往期开奖记录
   - 点击"加载更多"查看更多期次

### 数据更新

建议定期更新数据以保持推荐准确性：
- 每周更新1-2次
- 开奖日后及时更新
- 或使用定时任务自动更新

## 🔄 数据更新

### 手动更新

```bash
# 增量更新（推荐）
python data_crawler.py

# 完整更新
python full_data_crawler.py
```

### 自动更新

使用cron定时任务：

```bash
# 编辑crontab
crontab -e

# 添加定时任务（每天凌晨2点）
0 2 * * * cd /path/to/project && python data_crawler.py
```

## 🚢 生产部署

详细部署指南请查看 [MINIPROGRAM_SETUP.md](MINIPROGRAM_SETUP.md)

### 关键步骤

1. **部署API服务器**
   - 使用云服务器（阿里云、腾讯云等）
   - 配置HTTPS证书
   - 使用Nginx反向代理
   - 配置进程管理（如supervisor）

2. **配置小程序**
   - 修改API地址为生产环境
   - 在微信公众平台配置服务器域名
   - 上传代码并提交审核

3. **数据维护**
   - 设置定时任务自动更新数据
   - 定期备份数据文件
   - 监控服务运行状态

## 📋 API接口

| 接口 | 方法 | 说明 |
|------|------|------|
| `/api/data_status` | GET | 获取数据状态 |
| `/api/update_data` | POST | 更新最新数据 |
| `/api/get_predictions` | GET | 获取推荐号码 |
| `/api/get_history` | GET | 获取历史数据 |
| `/api/health` | GET | 健康检查 |

详细API文档请查看 [MINIPROGRAM_SETUP.md](MINIPROGRAM_SETUP.md)

## 🛠️ 开发说明

### 目录说明

- `miniprogram/` - 小程序前端代码
- `api-server/` - API后端服务
- `data_crawler.py` - 数据爬虫（增量）
- `full_data_crawler.py` - 数据爬虫（完整）

### 数据文件

- `full_lottery_data.json` - 统一数据存储
- 所有功能共享此文件，确保数据一致性

### 开发调试

1. 启动API服务器
2. 在微信开发者工具中调试小程序
3. 查看控制台日志
4. 使用TDesign组件调试工具

## ⚖️ 许可证

MIT License

## 🤝 贡献

欢迎提交问题和改进建议！

## 📞 联系方式

- 通过GitHub Issues提交问题
- 查看TDesign文档：https://tdesign.tencent.com/miniprogram

---

**再次提醒**: 本小程序仅供学习和娱乐，请理性购彩，不要沉迷！

**开发状态**: ✅ 已完成基础功能开发  
**最后更新**: 2025年11月
